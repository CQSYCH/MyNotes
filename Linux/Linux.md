# 				Linux

### 1、认识Linux目录

<img src="./../Img/Linux目录.jpg" />

### 2、比较重要目录

<img src="./../img/Linux重要目录.jpg"/>

### 3、目录结构

Bin：全称binary,含义为二进制，该目录存储的都是二进制文件，文件都可以被运行。

Dev：该目录中主要存放的外接设备，例如：U盘，光盘，移动硬盘，这些外接设备不能直接被使用，需要挂载（类似Windows分配盘符）

Etc：该目录主要是存储一些配置文件

Home：表示"家"，除了root用户以外其他用户的“家”目录

Proc：Process,表示进程，该目录中存储的是Linux运行时候的进程

Root：该目录是超级管理员专用目录

Sbin：全称，super binary,该目录也是存储的一些可以被执行的二进制文件，但必须有super权限的用户可以运行

Tmp：表示“临时”的，当我们系统运行时候产生的一些临时文件会在这里存放

Usr：存放的是用户自己安装的软件，相当于Windows 下的Program Files 

Var：存放的程序/系统的日志文件的目录

Mnt：当外接设备需要去挂载的时候，就会挂载到Mnt目录下

### 4、Linux指令

Linux指令:在终端（命令行）中输入的内容称为指令

一个完整指令的标准标准格式:Linux通用的格式

\#指令 [选项]  \[ 操作对象]

参考地址:https://man.linuxde.net

[选项]:一个指令可以包含多个选项
[操作对象]:可以是多个

### 5、基础命令

####    1、ls指令

​	   含义:ls (List)

​           用法1、# ls
	   含义: 列出当前工作目录下的所有文件/文件夹的名称

​	   用法2、# ls 路径

​           含义：列出指定路径下的所有文件/文件夹的名称

​	   用法3、# ls [选项] \[对象]

​           **\# ls  -l 路径**

​           **\# ls -a 路径**	

​	   **\# ls -lh 路径**

​       [选项] 解释: 

​         -l :  表示list,表示以列表方式展示

​         -a : 表示显示所有的文件/文件夹（包含了隐藏文件/文件夹）

​         -lh: 表示可读性更高方式显示

PS:关于“路径”
路径可以分为两种：相对路径、绝对路径

相对路径:参照物（当前工作路径）

绝对路径:从根路径查找一个路径

ls显示结果说明:

  			**蓝色**:表示**文件夹**

​			**黑色**:表示**文件**

​			**绿色**:拥有**所有权限**

#### 2、pwd指令

用法:**#pwd** （print working directory）

解释: **打印当前工作路径**

####3、cd指令

用法: **#cd** （change directory,改变路径）

解释:用户切换工作路径

语法: **# cd 路径**

Ps：**# cd ~**

快速切换到当前用户的家目录



#### 4、mkdir 指令

说明: mkdir (make directory) 创建目录

语法 1： #mkdir 路径  

用法：    #mkdir 路径  【路径，可以是文件夹的名称，也可以是包含名称的一个完整路径】

语法 2:    #mkdir -p 路径 , **创建多级不存在目录**

语法 3:    #mkdir 路径1 路径2 路径3 ， 一次性创建多级目录



#### 5、touch 指令

指令: touch	

作用: **用来创建文件**

语法 1 : #touch 文件路径 【路径，可以文件名，也可以是路径】

语法 2 ：#touch 文件名1 文件名2 ， 可创建多个文件

案例: 使用touch在当前路径下创建一个文件，命名为linux.txt

\#touch linux.txt



#### 6、cp 指令

指令：cp ( copy , 复制 )

作用：复制文件、复制文件夹到指定的位置

语法 1：#cp 被复制的文档的路径 文档被保存的路径

语法 2：#cp - r 被复制的路径 保存的新路径 ， “-r”,递归复制，子类文件夹、文件也会被复制

PS:

​    Linux 复制到新的位置 可以改名

​    当使用cp命令进行文件夹操作时加上 **"-r"**,递归复制

#### 7、mv 指令

指令：mv (move , 移动 ，剪切)

作用：移动文档到新位置,也可对文件、文件夹进行 **重命名**

语法：#mv 需要移动的文档路径 需要保存的位置路径

案例：使用mv命令来移动一个文件夹

#### 8、rm 指令

指令：rm (remove、移除、删除)

作用：移除/删除一个文档，也可删除多个

语法：**#rm [选项] 需要移除的文档路径**

选项：

​         -f ：force （强制）

​	 -r ：表示递归

案例：删除一个文件

**\#rm 文件路径及名称** 

PS:

​    强制删除一个文件，#rm -f  文件路径及名称 

案例：删除一个文件夹，以及文件夹下的所有东西（ **递归删除** ）

**\# rm -rf  文件夹路径**

案例：删除多个文件

**\# rm -rf 文件1 文件夹2** 

案例：删库跑路

**\# rm -f ***

#### 9、vim 指令

指令：vim  ( vim 是一款文本编辑器 )

语法：**#vim 文件的路径**

作用：打开一个文件（可以不存在，也可以存在）

案例：使用vim 打开一个文件

语法：**#vim 文件路径和名称**



在没有按下其他按键的时候，退出文件: shift + 英文冒号，输入q, 按下回车即可



#### 10、输出重定向

将输出到终端的信息重定向到文件保存，以便后续的分析、统计

\> ：覆盖输出，会覆盖掉原先的文件内容

\>> ：追加输出，不会覆盖原始文件内容，会在原始内容末尾继续添加

语法：**#正常执行的指令 >/>> 文件路径及名称**

案例：使用覆盖重定向，保存 ls -la 的实





#### 11、cat 指令

作用1：cat 有**直接**打开一个文件的功能

语法：**#cat 文件的路径**



作用2：cat 可以打开文件进行合并

语法：**#cat 待合并的文件路径1 待合并的文件路径2...待合并的文件路径n > 合并之后的文件路径**



### 6、进阶指令

#### 1、df 指令

作用：查看磁盘空间

语法: **#df -h** 



#### 2、free 指令

作用：查看内存使用情况

语法：**#free -m**

Swap：用于临时内存，当系统真实内存不够用的时候可以临时使用磁盘充当内存

#### 3、head 指令

作用：查看一个文件的前n行，如果不指定n,默认显示前10行

语法：**#head n 文件路径**

#### 4、tail 指令

 作用1：查看一个文件的末n行，如果不指定n默认显示后10行

 语法：**#tail -n 文件的路径 n（同样表示数字）**s

 作用：可以查看文件的动态变化

 语法：**# tail -f 文件路径**



#### 5、less 指令

作用：查看文件，以较少的内容进行输出，按下辅助功能键查看更多

语法：**# less 需要查看的文件**



#### 6、wc 指令

作用：用于统计文件内容信息（包括行数、单词数、字节数）

语法：**#wc -lwc 需要统计的文件**

PS：

​	**-l** :表示 Lines，行数

​	**-w**：表示 words,单词数

​	**-c**：表示 bytes，字节数

#### 7、date 指令

作用：表示操作时间日期（读取、设置）

语法 1：**#date**

语法2：**#date +%F** 输出年月日  等同于 #date "+%Y-%m-%d"

语法3：**#date "+%F %T"** 引号让“年月日与时分秒”成为一个不可分割的整天

语法4：**#date "+%Y-%m-%d %H:%M:%S"** 

获取之前或之后的时间（备份）

语法5：**#date -d "-1 day" "+%Y-%m-%d %H:%M:%S"**  (前一天时间)

PS:

​	**%F** ：完整的**年月日**

​	**%T** ：完整的**时分秒**

​	**%Y** ：四位数的年份

​	**%m**:  两位数的月份（带0）

​	**%d** ：两位数的日   （带0）

 	**%H** ：两位数的时  （带0）

​	**%M** ：两位数的分  （带0）

​	**%S** ：两位数的秒    （带0）

#### 8、cal 指令

作用：用来操作日历

语法1：**#cal**  等价于 **#cal -l** 直接输出当前月份的日历

语法2：**#cal -3** 输出上一个月+本月+下一月的日历

案例：输出某一年的日历

语法：**#cal -y 2019**

#### 9、clear 指令 

作用：清除终端打印的信息，清屏

语法：**#clear**  等用于 **Ctrl+L**

#### 10、管道 指令

管道符: |

作用：管道符一般用于 **过滤** ，**特殊**，**扩展处理**

语法：管道不能单独使用、必须配合其他指令来一起使用，其作用是辅助作用。

**过滤案例**：通过**管道**查询出根目录下包含“y”字母的文档名称

语法：**\# ls / | grep y**

 以管道（|）作为分界线（grep，过滤）

**grep** 指令：主要用于过滤



**特殊案例**：通过管道实现 #less 的效果

语法：**#cat world.txt | less**  （按Q退出）



**扩展案例**：查看某个目录下的文档个数

语法：**\# ls / |wc -l**  （输出目录下文件个数）



### 7、 高级指令

#### 1、hostname 指令

作用：操作服务器的主机名（**读取**、设置）

语法：#hostname      含义：输出完整的主机名

语法：#hostname      含义：输出当前主机名中的FQDN (全限定域名)

#### 2、id 指令

作用：查看一个用户的基本信息（包含用户ID，用户组ID，附件组ID...）,如果不指定用户就显示当前用户信息

语法1：#id

语法2：#id 用户  

#### 3、whoami 指令

作用：“我是谁？”，显示当前登陆的用户名，一般用户Shell 脚本，做日志信息

语法：**#whoami** 

#### 4、ps -ef 指令

作用：查看服务器的进程信息

选项：

​	-e：等价于 “-A” 表示列出全部的进程

​	-f：显示全部的列表

输出信息的含义：

​		**UID**：该进程的用户id

​		**PID**：进程id

​		**PPID**：该进程的父级进程id，如果一个进程的父级进程id找不到，该进程成为僵尸进程

​		**C**：CUP的占用率，百分比显示

​		**STIME**：进行的启动时间

​		**TTY**：终端设备，发起该进程的设备识别符合，如果显示的是"?"问号，表示该进程不是由终端设备发起

​		**TIME**：进程的执行时间

​		**CMD**：该进程的名称或者对应的路径

案例：在ps的结果中过滤出想要查看的进程状态

语法：**#ps -ef | grep 进程名称**



#### 5、top 指令

作用：查看服务器的进程占的资源

语法：**#top** （动态显示）（退出按q键）

输出结果解释：

​			**PDI**：进程id

​			**USER**：该进程对应的用户

​			**PR**：优先级

​			**NI**：用户进程空间内改变过优先级的进程占用CUP百分比

​			**VIRT**：虚拟内存

​			**RES**：常驻内存

​			**SHR**：共享内存

​				   计算一个进程**实际使用的内存**=**常驻内存(RES)**-**共享内存(SHR)**

​			**S**：表示睡眠状态（Sleeping,S-睡眠，R-运行）睡眠进程

​			**%CUP**：表示CUP占用百分比

​			**%MEM**：表示内存的占用百分比

​			**TIME+**： 表示执行的时间

​			**COMMAND**：进程的名称或路径



在运行#top的时候，可按下方便快捷键：

​		     M：表示按照内存（MEM）从高到低排序

​		     P ：表示按照CPU使用率从高到低进行排序

​		     1：当服务器拥有多个CUP的时候，使用“1”快捷键来切换展示各个CUP的详细信息



#### 6、du -sh 指令

作用：查看目录的真实大小

语法：**#du -sh  目录路径**

选项：

​	-s：表示只显示汇总的大小

​	-h：表示以高可读性的形式进行显示

案例：统计“etc/”目录的大小

语法：**#du -sh /etc**



#### 7、find 指令

作用：用户查找文件（其参数有55个之多）

语法：**#find 路径范围 选项  选项的值** 

选项：

​	-name：按名称搜索（支持模糊查询）

​	-type：按类型搜索

​		文档类型 **“-”**表示文件（在使用find时候需要用**“f”**来替换），**“d”**表示文件夹

案例1：使用find来搜索httpd.conf文件

语法1：**#find / -name httpd.conf**

案例2：统计文件数：

语法2：**#find / -name httpd.conf |wc -l**

案例3：使用find来搜索根目录下所有文件

语法3：**#find / -type f**

案例4：使用find搜索根目录下的所有文件夹

语法4：**#find  / -type d** 



#### 8、service 指令

作用：用于控制一些软件服务的 **启动/停止/重启**

语法：#service 服务名 **start\stop\restart**



#### 9、kill 指令

作用：终止进程（关闭进程）

语法：**#kill 进程PID**  (语法需要配合#ps一起使用)

有个更好用的终止进程的命令：**#killall**

语法：**#killall 进程名称**

#### 10、ifconfig 指令

作用：用于操作网卡相关的指令

语法：#ifconfig (获取网卡信息)

#### 11、reboot 指令

作用：重新启动计算机

语法1：**#reboot** 

语法2：#reboot -w 模拟重启，但是不重启

#### 12、shutdown 指令

作用：关机

语法1：#shutdown -h now  "关机提示" 或者  #shutdown -h 15:25 “关机提示”



#### 13、uptime 指令

作用：输出计算机的在线时间（开机到现在的运行时间）

语法：**#uptime** 

#### 14、uname 指令

作用：获取操作系统的类型

语法1：**#uname**

语法2：**#uname -a**（类型、全部主机名、内核版本、发布时间、开源计划）

#### 15、netstat -tnlp 指令

作用：查看网络的连接状态

语法：**#netstat -tnlp**

选项：

​	**-t**：表示只列出tcp协议的连接

​	**-n**：表示将地址从字母组合转换成Ip地址，将协议转换成端口来显示

​	**-l** ：表示过滤出“state（状态）”列出其值为LISTEN（监听）的连接

​	**-p**：表示显示发起连接的进程的PID和进程的名称



#### 16、man 指令

作用：**manual**,手册（包含了Linux中全部命令手册，英文）

语法：**#man 命令**					（退出按下q键）

案例：查询#cp 指令的用法

语法：**#man cp**

###8、vim 编辑器

#### 1、vim三种模式

解释：vim中存在三种模式（大众的认知）：命令模式、编辑模式（输入模式）、末行模式（尾行模式）

#####命令模式：

​	在该模式下是不能对文件直接编辑，可以输入快捷方式进行一些操作（删除行、复制行、移动光标、粘贴等等）【打开文件默认打开的模式】

#####编辑模式：

​	在该模式下可以对文件的内容进行编辑

#####末行模式：

​	可以在末行输入命令来对文件进行操作（搜索、替换、保存、退出、撤销、高亮等等）

##### Vim打开文件的方式（4种，要求掌握三种）

语法：**#vim 文件路径**					作用：打开指定文件

语法：**#vim +数字  文件路径**			作用：打开指定文件，并且将光标移动到指定行

语法：**#vim +/关键字	文件的路径**		作用： 打开指定文件，并且高亮显示关键字

语法：**#vim 文件路径1 文件路径2 文件路径3**			作用：同时打开多个文件

重点：先去复制出一个etc/passwd文件，复制到当前家目录

语法：**#cp /etc/passwd ~/**  

退出vim 方式，**:q**



### 9、用户管理

​	Linux系统是一个多用户多任务的操作系统，任何一个要使用系统资源的用户，都必须首先向系统管路员申请一个账号，然后以这个账号的身份进入系统。

​	用户的帐号一方面可以帮助系统管理员对使用系统的用户进行跟踪，并控制他们对系统资源的访问；另一方面也可以帮助用户组织文件，并为用户提供安全性保护。

​	每个用户帐号都拥有一个唯一的用户名和各自的密码。

​	用户在登陆时键入正确的用户名和密码后，就能够进入系统和自己的主目录。

​	要想实现用户帐号的管理，要完成的工作主要有如下几个方面：

​		**用户**帐号的添加、删除、修改以及用户密码的管理。

​		**用户组**的管理。

注意三个文件：

​			**/etc/passwd**：	存储用户的关键信息

​			**/etc/group**：		存储用户组的关键信息

​			**/etc/shadow**：	存储用户的密码信息

####1、添加用户

常用语法：#useradd 选项 用户名

常用选项：

​	**-g**：表示指定用户的用户组，选项的值可以是用户组的id，也可以是组名

​	**-G**：表示指定用户的用户附加组，选项的值可以是用户组的id，也可以是组名

​	**-u**：uid，用户的id（用户的标识），系统默认会从500之后按顺序分配id

案例：创建一个zhangsan用户

语法：**#useradd zhangsan**

1、验证是否创建成功，查看/etc/passwd文件末尾是否出现该信息

语法：**#cat  /etc/passwd**

2、验证home目录下是否存在同名家目录

语法：**#ls /home**

PS：每个用户有单独的解释器

​	在不添加选项的时候，执行useradd之后系统会执行一系列的操作

​		a. 创建同名的家目录

​		b.创建同名的用户组

案例：添加选项，创建用户TUser

语法：**#useradd Tuser**

####2、修改用户

常用语法：**#usermod 选项 用户名**

常用选项：

​	**-g**：表示指定用户的用户组，选项的值可以是用户组的id，也可以是组名

​	**-G**：表示指定用户的用户附加组，选项的值可以是用户组的id，也可以是组名

​	**-u**：uid，用户的id（用户的标识），系统默认会从500之后按顺序分配id

​	**-l** ：修改用户名

案例：修改TUser**用户组主组为1000和**用户附加组为1001**

语法：**#usermod -g 1000 -G 1001 TUser**

案例：修改TUser用户名为TUSER01

语法：**#usermod -l TUSER01 TUser**

####3、设置密码

Linux不允许没有密码的用户登录到系统，因此创建的新用户目前为锁定状态，需要设置密码之后才能登录计算机

常用语法：**#passwd 用户名**

案例：设置TUSER01的密码为123456789

语法：**#passwd TUSER01**



PS:

​	设置密码后可以登录到系统，切换用户的命令

​	切换命令：**#su [用户名] (switch user)**

​	如果用户名指定，默认切换到超级管理员

**切换用户需要注意**：

​				**a**、从root切换到普通用户不需要密码，反之需要root密码；

​				**b**、切换用户之后前后的工作目录是不变的；

​				**c**、普通用户没有权限访问root家目录，但是反之可以；

####4、删除用户

常用语法：**#userdel 用户名**

常用选项：

​		-r：在删除用户的同时，删除其家目录

案例：删除TUSER01用户

语法：**#userdel -r TUSER01**



### 10、用户组管理

​	每个用户都有一个用户组，系统可以对一个用户组中的所有用户进行集中管理。不同Linux系统对用户组的规定有所不用，如Linux下的用户属于与它同名的用户组，这个用户组在创建用户时同时创建。

​	用户组的管理涉及用户组的添加、删除和修改。组的增加、删除和修改实际上就是对**/etc/group**文件的更新

#### 1、用户组的添加

常用语法：**#groupadd 选项 用户组名**

常用选项：

​		-g：类似用户的-u，允许自己设置组ID,不设置默认从500之后递增

案例：使用命令创建新的用户组

语法：**#groupadd Administrator**

#### 2、用户组编辑

常用语法：**#groupmod 选项 用户组名**

常用选项：

​		-g：类似用户的-u，允许自己设置组ID

​		-n：类似于用户修改“-l”,修改组名称











